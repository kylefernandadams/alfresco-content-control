if(typeof Alfresco=="undefined"){var Alfresco={}}Alfresco.Lightbox=(function(){var h=Alfresco.constants.URL_RESCONTEXT+"components/images/lightbox/loading.gif";var c=Alfresco.constants.URL_RESCONTEXT+"components/images/lightbox/close.gif";var b=function b(){var i;if(self.pageYOffset){i=self.pageYOffset}else{if(document.documentElement&&document.documentElement.scrollTop){i=document.documentElement.scrollTop}else{if(document.body){i=document.body.scrollTop}}}arrayPageScroll=new Array("",i);return arrayPageScroll};var g=function g(){var k,i;if(window.innerHeight&&window.scrollMaxY){k=document.body.scrollWidth;i=window.innerHeight+window.scrollMaxY}else{if(document.body.scrollHeight>document.body.offsetHeight){k=document.body.scrollWidth;i=document.body.scrollHeight}else{k=document.body.offsetWidth;i=document.body.offsetHeight}}var j,l;if(self.innerHeight){j=self.innerWidth;l=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){j=document.documentElement.clientWidth;l=document.documentElement.clientHeight}else{if(document.body){j=document.body.clientWidth;l=document.body.clientHeight}}}if(i<l){pageHeight=l}else{pageHeight=i}if(k<j){pageWidth=j}else{pageWidth=k}arrayPageSize=new Array(pageWidth,pageHeight,j,l);return arrayPageSize};var e=function e(i){if(i==null){keycode=event.keyCode}else{keycode=i.which}if(keycode===27){f()}};var d=function d(k){var p=document.getElementById("overlay");var j=document.getElementById("lightbox");var m=document.getElementById("lightboxCaption");var q=document.getElementById("lightboxImage");var i=document.getElementById("loadingImage");var o=document.getElementById("lightboxDetails");var n=g();var l=b();if(i){i.style.top=(l[1]+((n[3]-35-i.height)/2)+"px");i.style.left=(((n[0]-20-i.width)/2)+"px");i.style.display="block"}p.style.height=(n[1]+"px");p.style.opacity=0;p.style.display="block";new YAHOO.util.ColorAnim(p,{opacity:{to:1}},0.25).animate();imgPreload=new Image();imgPreload.onload=function(){q.src=k.href||k.src;var s=imgPreload.width,r=imgPreload.height;if(s>n[0]){s=n[0];r=s/(imgPreload.width/imgPreload.height)}var v=l[1]+((n[3]-r)/2);var t=((n[0]-20-s)/2);j.style.top=(v<0)?"0px":v+"px";j.style.left=(t<0)?"0px":t+"px";j.style.minWidth="128px";o.style.minWidth="128px";j.style.width=s-40+"px";o.style.width=s-40+"px";lightboxImage.style.width=s-40+"px";var u=k.title;if(!u&&k.getAttribute){u=k.getAttribute("title")}if(u){m.style.display="block";m.innerHTML=u}else{m.style.display="none"}if(i){i.style.display="none"}j.style.opacity=0;j.style.display="block";new YAHOO.util.ColorAnim(j,{opacity:{to:1}},0.25).animate();n=g();p.style.height=(n[1]+"px");if(document.addEventListener){document.addEventListener("keyup",e,false)}else{document.attachEvent("onkeyup",e)}return false};imgPreload.src=k.href||k.src};var f=function f(){objOverlay=document.getElementById("overlay");objLightbox=document.getElementById("lightbox");objOverlay.style.display="none";objLightbox.style.display="none";if(document.removeEventListener){document.removeEventListener("keyup",e)}else{document.detachEvent("onkeyup",e)}};var a=function a(){var s=document.getElementsByTagName("body").item(0);var r=document.createElement("div");r.setAttribute("id","overlay");r.onclick=function(){f();return false};r.style.display="none";r.style.position="absolute";r.style.top="0";r.style.left="0";r.style.zIndex="90";r.style.width="100%";s.insertBefore(r,s.firstChild);var l=g();var m=b();var n=new Image();n.onload=function(){var u=document.createElement("a");u.setAttribute("href","#");u.onclick=function(){f();return false};r.appendChild(u);var t=document.createElement("img");t.src=h;t.setAttribute("id","loadingImage");t.setAttribute("alt",Alfresco.util.message.call(this,"lightbox.loading"));t.style.position="absolute";t.style.zIndex="150";u.appendChild(t);n.onload=function(){};return false};n.src=h;var i=document.createElement("div");i.setAttribute("id","lightbox");i.style.display="none";i.style.position="absolute";i.style.boxShadow="9px 9px 9px #222";i.style.zIndex="100";s.insertBefore(i,r.nextSibling);var j=document.createElement("a");j.setAttribute("href","#");j.onclick=function(t){f();return false};i.appendChild(j);var o=new Image();o.onload=function(){var t=document.createElement("img");t.src=c;t.setAttribute("id","closeButton");t.setAttribute("alt",Alfresco.util.message.call(this,"lightbox.close"));t.style.position="absolute";t.style.zIndex="200";j.appendChild(t);return false};o.src=c;var q=document.createElement("img");q.setAttribute("id","lightboxImage");q.setAttribute("alt","");j.appendChild(q);var p=document.createElement("div");p.setAttribute("id","lightboxDetails");i.appendChild(p);var k=document.createElement("div");k.setAttribute("id","lightboxCaption");k.style.display="none";p.appendChild(k)};if(window.addEventListener){window.addEventListener("load",a,false)}else{window.attachEvent("onload",a)}return{show:d}})();