(function(){var g=YAHOO.util.Dom,i=YAHOO.util.Event,a=YAHOO.util.Selector;Alfresco.dashlet.DocSummary=function h(j){return Alfresco.dashlet.DocSummary.superclass.constructor.call(this,j)};YAHOO.extend(Alfresco.dashlet.DocSummary,Alfresco.component.SimpleDocList,{PREFERENCES_DOCSUMMARY_DASHLET:"",PREFERENCES_DOCSUMMARY_DASHLET_FILTER:"",PREFERENCES_DOCSUMMARY_DASHLET_VIEW:"",onReady:function c(){this.PREFERENCES_DOCSUMMARY_DASHLET=this.services.preferences.getDashletId(this,"docsummary");this.PREFERENCES_DOCSUMMARY_DASHLET_FILTER=this.PREFERENCES_DOCSUMMARY_DASHLET+".filter";this.PREFERENCES_DOCSUMMARY_DASHLET_VIEW=this.PREFERENCES_DOCSUMMARY_DASHLET+".simpleView";this.widgets.filter=Alfresco.util.createYUIButton(this,"filters",this.onFilterChange,{type:"menu",menu:"filters-menu",lazyloadmenu:false});var k=this.options.validFilters[0].type;for(var j=0;j<this.options.validFilters.length;j++){if(this.options.filter===this.options.validFilters[j].type){k=this.options.filter;break}}this.widgets.filter.set("label",this.msg("filter."+k)+" "+Alfresco.constants.MENU_ARROW_SYMBOL);this.widgets.filter.value=k;this.widgets.simpleDetailed=new YAHOO.widget.ButtonGroup(this.id+"-simpleDetailed");if(this.widgets.simpleDetailed!==null){this.widgets.simpleDetailed.check(this.options.simpleView?0:1);this.widgets.simpleDetailed.on("checkedButtonChange",this.onSimpleDetailed,this.widgets.simpleDetailed,this)}g.removeClass(a.query(".toolbar div",this.id,true),"hidden");Alfresco.dashlet.DocSummary.superclass.onReady.apply(this,arguments)},getParameters:function f(){return"filter="+this.widgets.filter.value},getWebscriptUrl:function e(){return Alfresco.constants.PROXY_URI+"slingshot/doclib/doclist/documents/site/"+Alfresco.constants.SITE+"/documentLibrary?max=50"},onFilterChange:function d(k,j){var l=j[1];if(l){this.widgets.filter.set("label",l.cfg.getProperty("text")+" "+Alfresco.constants.MENU_ARROW_SYMBOL);this.widgets.filter.value=l.value;this.services.preferences.set(this.PREFERENCES_DOCSUMMARY_DASHLET_FILTER,this.widgets.filter.value);this.reloadDataTable()}},onSimpleDetailed:function b(j,k){this.options.simpleView=j.newValue.index===0;this.services.preferences.set(this.PREFERENCES_DOCSUMMARY_DASHLET_VIEW,this.options.simpleView);if(j){i.preventDefault(j)}this.reloadDataTable()}})})();