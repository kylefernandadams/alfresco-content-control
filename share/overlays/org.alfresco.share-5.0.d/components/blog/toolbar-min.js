(function(){var d=YAHOO.util.Dom,j=YAHOO.util.Event,a=YAHOO.util.Element;Alfresco.BlogToolbar=function(l){this.name="Alfresco.BlogToolbar";this.id=l;this.widgets={};this.modules={};this.options={};Alfresco.util.YUILoaderHelper.require(["button","container","connection"],this.onComponentsLoaded,this);YAHOO.Bubbling.on("deactivateAllControls",this.onDeactivateAllControls,this);return this};Alfresco.BlogToolbar.prototype={widgets:null,modules:null,options:{siteId:null,containerId:null,allowCreate:null,allowConfigure:null},setOptions:function b(l){this.options=YAHOO.lang.merge(this.options,l);return this},setMessages:function e(l){Alfresco.util.addMessages(l,this.name);return this},onComponentsLoaded:function k(){j.onContentReady(this.id,this.onReady,this,true)},onReady:function f(){this.widgets.createButton=Alfresco.util.createYUIButton(this,"create-button",this.onNewBlogClick,{disabled:!this.options.allowCreate});this.widgets.rssFeedButton=Alfresco.util.createYUIButton(this,"rssFeed-button",null,{type:"link"});if(this.widgets.rssFeedButton!==null){this._generateRSSFeedUrl()}},onNewBlogClick:function h(l){window.location.href=Alfresco.constants.URL_PAGECONTEXT+"site/"+this.options.siteId+"/blog-postedit"},_generateRSSFeedUrl:function g(){var l=YAHOO.lang.substitute(Alfresco.constants.URL_FEEDSERVICECONTEXT+"components/blog/rss?site={site}",{site:this.options.siteId});this.widgets.rssFeedButton.set("href",l)},onConfigureBlog:function i(l,m){if(!this.modules.configblog){this.modules.configblog=new Alfresco.module.ConfigBlog(this.id+"-configblog")}this.modules.configblog.setOptions({siteId:this.options.siteId,containerId:this.options.containerId});this.modules.configblog.showDialog();j.preventDefault(l)},onDeactivateAllControls:function c(n,m){var l,o,p=Alfresco.util.disableYUIButton;for(l in this.widgets){if(this.widgets.hasOwnProperty(l)){p(this.widgets[l])}}}}})();