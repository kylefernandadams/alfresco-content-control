Alfresco.WebPreview.prototype.Plugins.WebPreviewer=function(b,a){this.wp=b;this.attributes=YAHOO.lang.merge(Alfresco.util.deepCopy(this.attributes),a);this.swfDiv=null;this.fullWindowMode=false;return this};Alfresco.WebPreview.prototype.Plugins.WebPreviewer.prototype={attributes:{src:null,paging:"false",disableI18nInputFix:"false",showFullScreenButton:"true",showFullWindowButton:"true"},swfDiv:null,fullWindowMode:false,report:function WebPreviewer_report(){if(!Alfresco.util.hasRequiredFlashPlayer(9,0,124)){return this.wp.msg("label.noFlash")}},display:function WebPreviewer_display(){var a=this.resolveUrls();this.createSwfDiv();var b="WebPreviewer_"+this.wp.id;var c=new YAHOO.deconcept.SWFObject(Alfresco.constants.URL_CONTEXT+"res/components/preview/WebPreviewer.swf",b,"100%","100%","9.0.45");c.addVariable("fileName",this.wp.options.name);c.addVariable("paging",this.attributes.paging);c.addVariable("url",a.url);c.addVariable("jsCallback","Alfresco_WebPreview_WebPreviewerPlugin_onWebPreviewerEvent");c.addVariable("jsLogger","Alfresco_WebPreview_WebPreviewerPlugin_onWebPreviewerLogging");c.addVariable("i18n_actualSize",this.wp.msg("preview.actualSize"));c.addVariable("i18n_fitPage",this.wp.msg("preview.fitPage"));c.addVariable("i18n_fitWidth",this.wp.msg("preview.fitWidth"));c.addVariable("i18n_fitHeight",this.wp.msg("preview.fitHeight"));c.addVariable("i18n_fullscreen",this.wp.msg("preview.fullscreen"));c.addVariable("i18n_fullwindow",this.wp.msg("preview.fullwindow"));c.addVariable("i18n_fullwindow_escape",this.wp.msg("preview.fullwindowEscape"));c.addVariable("i18n_page",this.wp.msg("preview.page"));c.addVariable("i18n_pageOf",this.wp.msg("preview.pageOf"));c.addVariable("show_fullscreen_button",this.attributes.showFullScreenButton);c.addVariable("show_fullwindow_button",this.attributes.showFullWindowButton);c.addVariable("disable_i18n_input_fix",this.disableI18nInputFix());c.addParam("allowNetworking","all");c.addParam("allowScriptAccess","sameDomain");c.addParam("allowFullScreen","true");c.addParam("wmode","transparent");c.write(this.swfDiv.get("id"));YAHOO.util.Event.addListener(b,"mouseover",function(f){var d=YAHOO.util.Dom.get(b);if(d&&YAHOO.lang.isFunction(d.setMode)){YAHOO.util.Dom.get(b).setMode("active")}});YAHOO.util.Event.addListener(b,"mouseout",function(f){var d=YAHOO.util.Dom.get(b);if(d&&YAHOO.lang.isFunction(d.setMode)){YAHOO.util.Dom.get(b).setMode("inactive")}});YAHOO.util.Event.addListener(window,"resize",function(){if(this.swfDiv.getStyle("height")!=="100%"){this.synchronizeSwfDivPosition()}},this,true);this.synchronizeSwfDivPosition();YAHOO.lang.later(500,this,this.synchronizeSwfDivPosition,[],true)},resolveUrls:function WebPreviewer_resolveUrls(){return{url:this.attributes.src?this.wp.getThumbnailUrl(this.attributes.src):this.wp.getContentUrl()}},onWebPreviewerLogging:function WebPreviewer_onWebPreviewerLogging(b,c,a){if(YAHOO.lang.isFunction(Alfresco.logger[c])){Alfresco.logger[c].call(Alfresco.logger,"WebPreviewer("+a+"): "+b)}},onWebPreviewerEvent:function WebPreviewer_onWebPreviewerEvent(c,a){if(c.event){if(c.event.type=="onFullWindowClick"){this.fullWindowMode=true;var d=YAHOO.util.Dom.getClientRegion();this.swfDiv.setStyle("left",d.left+"px");this.swfDiv.setStyle("top",d.top+"px");this.swfDiv.setStyle("width","100%");this.swfDiv.setStyle("height","100%")}else{if(c.event.type=="onFullWindowEscape"){this.fullWindowMode=false;this.synchronizeSwfDivPosition()}}}else{if(c.error){var b="Error";if(c.error.code){b=this.wp.msg("error."+c.error.code)}Alfresco.util.PopupManager.displayMessage({text:b})}}},disableI18nInputFix:function WebPreviewer__resolvePreview(a){return this.attributes.disableI18nInputFix},createSwfDiv:function WebPreviewer_createSwfDiv(){if(!this.swfDiv){var a=new YAHOO.util.Element(document.createElement("div"));a.set("id",this.wp.id+"-full-window-div");a.setStyle("position","absolute");a.addClass("web-preview");a.addClass("real");a.appendTo(document.body);this.swfDiv=a}},synchronizeSwfDivPosition:function WebPreviewer_synchronizePosition(){if(!this.fullWindowMode){var a=new YAHOO.util.Element(this.wp.getPreviewerElement());var b=YAHOO.util.Dom.getRegion(a.get("id"));this.swfDiv.setStyle("left",b.left+"px");this.swfDiv.setStyle("top",b.top+"px");this.swfDiv.setStyle("width",b.width+"px");this.swfDiv.setStyle("height",b.height+"px")}}};Alfresco_WebPreview_WebPreviewerPlugin_onWebPreviewerLogging=function Alfresco_WebPreview_WebPreviewerPlugin_onWebPreviewerLogging(d,e,a){var b=a.substring("WebPreviewer_".length);var c=Alfresco.util.ComponentManager.get(b).plugin;return c.onWebPreviewerLogging.apply(c,arguments)};Alfresco_WebPreview_WebPreviewerPlugin_onWebPreviewerEvent=function Alfresco_WebPreview_WebPreviewerPlugin_onWebPreviewerEvent(b,a){var c=a.substring("WebPreviewer_".length);var d=Alfresco.util.ComponentManager.get(c).plugin;return d.onWebPreviewerEvent.apply(d,arguments)};