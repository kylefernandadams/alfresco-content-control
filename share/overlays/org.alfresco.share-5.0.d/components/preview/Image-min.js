Alfresco.WebPreview.prototype.Plugins.Image=function(b,a){this.wp=b;this.attributes=YAHOO.lang.merge(Alfresco.util.deepCopy(this.attributes),a);return this};Alfresco.WebPreview.prototype.Plugins.Image.prototype={attributes:{src:null,srcMaxSize:"2000000"},report:function Image_report(){},display:function Image_display(){var d=this.attributes.srcMaxSize;if(!this.attributes.src&&d.match(/^\d+$/)&&this.wp.options.size>parseInt(d)){var c="";c+=this.wp.msg("Image.tooLargeFile",this.wp.options.name,Alfresco.util.formatFileSize(this.wp.options.size));c+="<br/>";c+='<a class="theme-color-1" href="'+this.wp.getContentUrl(true)+'">';c+=this.wp.msg("Image.downloadLargeFile");c+="</a>";c+="<br/>";c+='<a style="cursor: pointer;" class="theme-color-1" onclick="javascript: this.parentNode.parentNode.innerHTML = \'<img src='+this.wp.getContentUrl(false)+">';\">";c+=this.wp.msg("Image.viewLargeFile");c+="</a>";return'<div class="message">'+c+"</div>"}else{var b=this.attributes.src?this.wp.getThumbnailUrl(this.attributes.src):this.wp.getContentUrl();var a=new Image;a.onload=function(){if("naturalHeight" in this){if(this.naturalHeight+this.naturalWidth===0){this.onerror();return}}else{if(this.width+this.height==0){this.onerror();return}}this.wp.widgets.previewerElement.innerHTML="";this.wp.widgets.previewerElement.appendChild(a)};a.onerror=function(){this.wp.widgets.previewerElement.innerHTML='<div class="message">'+this.wp.msg("label.noPreview",this.wp.getContentUrl(true))+"</div>"};a.wp=this.wp;a.src=b;return null}}};