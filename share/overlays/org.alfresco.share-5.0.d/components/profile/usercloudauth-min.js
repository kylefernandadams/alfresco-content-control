(function(){var d=YAHOO.util.Dom,c=YAHOO.util.Event;Alfresco.UserCloudAuth=function(h){Alfresco.UserCloudAuth.superclass.constructor.call(this,"Alfresco.UserCloudAuth",h,["button"]);return this};YAHOO.extend(Alfresco.UserCloudAuth,Alfresco.component.Base,{onReady:function b(){this.widgets.signIn=Alfresco.util.createYUIButton(this,"button-signIn",this.onSignInClick);this.widgets.edit=Alfresco.util.createYUIButton(this,"button-edit",this.onEditSettings);this.widgets.remove=Alfresco.util.createYUIButton(this,"button-delete",this.onDeleteSettings);if(!this.modules.cloudAuth){this.modules.cloudAuth=new Alfresco.module.CloudAuth(this.id+"cloudAuth")}this.modules.cloudAuth.setOptions({authCallback:this.onSuccess,authCallbackContext:this})},onSignInClick:function a(h,i){this.modules.cloudAuth.displayPrompt()},onSuccess:function g(h){Alfresco.util.PopupManager.displayMessage({text:Alfresco.util.message("message.valid",this.name)});YAHOO.lang.later(1000,this,function(){window.location.reload()})},onEditSettings:function e(h,i){this.onSignInClick(h,i)},onDeleteSettings:function f(k,l){var i=this;Alfresco.util.PopupManager.displayPrompt({title:Alfresco.util.message("confirm.delete.title",this.name),text:Alfresco.util.message("confirm.delete.message",this.name),buttons:[{text:this.msg("button.delete"),handler:function j(){this.destroy();Alfresco.util.Ajax.jsonDelete({url:Alfresco.constants.PROXY_URI+"cloud/person/credentials",successCallback:{fn:function m(n){Alfresco.util.PopupManager.displayMessage({text:Alfresco.util.message("message.delete.success",i.name)});YAHOO.lang.later(1000,i,function(){window.location.reload()})},scope:i},failureMessage:Alfresco.util.message("message.delete.error",i.name)})}},{text:this.msg("button.cancel"),handler:function h(){this.destroy()},isDefault:true}]})}})})();