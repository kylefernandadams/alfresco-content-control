(function(){var d=YAHOO.util.Dom,b=YAHOO.util.Event;Alfresco.UserSites=function(g){Alfresco.UserSites.superclass.constructor.call(this,"Alfresco.UserSites",g,["button"]);return this};YAHOO.extend(Alfresco.UserSites,Alfresco.component.Base,{onReady:function c(){var g=this;b.addListener(this.id+"-sites","click",this.changeSiteNotification,this,true)},changeSiteNotification:function f(i){var n=i.target||i.srcElement;var m=n.name;if(n.id.indexOf(this.id+"_notification_")===0){var o=n.id.substring(n.id.lastIndexOf("_notification_")+14);var l=YAHOO.util.Dom.get(this.id+"_title_"+o).value;var j=Alfresco.constants.PROXY_URI+"api/activities/feed/control";var h,p;var k;var g=null;if(m=="enable"){h=Alfresco.util.Ajax.DELETE;j+="?s="+o;p="message.delete.success";k="message.delete.failure"}else{h=Alfresco.util.Ajax.POST;g={siteId:o};p="message.post.success";k="message.post.failure"}Alfresco.util.Ajax.request({url:j,method:h,requestContentType:Alfresco.util.Ajax.JSON,dataObj:g,failureMessage:Alfresco.util.message(k,this.name,l),successCallback:{fn:this.onNotificationChange_success,scope:this,obj:{siteName:o,siteTitle:l}}})}},onNotificationChange_success:function e(g,j){var k=j.siteName,i=j.siteTitle;var h=YAHOO.util.Dom.get(this.id+"_notification_"+k);if(h.name=="enable"){h.innerHTML=Alfresco.util.encodeHTML(Alfresco.util.message("button.disable",this.name));h.name="disable";h.title=Alfresco.util.encodeHTML(Alfresco.util.message("button.disable.tooltip",this.name,i))}else{h.innerHTML=Alfresco.util.encodeHTML(Alfresco.util.message("button.enable",this.name));h.name="enable";h.title=Alfresco.util.encodeHTML(Alfresco.util.message("button.enable.tooltip",this.name,i))}},onNotificationChange_failure:function a(g,j){var k=j.siteName,i=j.siteTitle,l=j.method;var h=YAHOO.util.Dom.get(this.id+"_notification_"+k);if(l==Alfresco.util.Ajax.DELETE){h.checked=false}else{if(l==Alfresco.util.Ajax.POST){h.checked=true}}}})})();