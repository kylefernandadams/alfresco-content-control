(function(){var h=YAHOO.util.Dom,i=YAHOO.util.Event;var g=Alfresco.util.encodeHTML;Alfresco.Transitions=function(j){Alfresco.Transitions.superclass.constructor.call(this,"Alfresco.Transitions",j,["button","container"]);return this};YAHOO.extend(Alfresco.Transitions,Alfresco.component.Base,{options:{currentValue:"",transitions:null},onReady:function a(){this._processTransitions();this._generateTransitionButtons()},onClick:function d(m,n){n.set("disabled",true);var l=n.get("id");var k=l.substring(this.id.length+1);var j=this._getHiddenField();h.setAttribute(j,"value",k);if(Alfresco.logger.isDebugEnabled()){Alfresco.logger.debug("Set transitions hidden field to: "+k)}Alfresco.util.submitForm(n.getForm())},_processTransitions:function c(){this.options.transitions=[];if(Alfresco.logger.isDebugEnabled()){Alfresco.logger.debug("Processing transitions for field '"+this.id+"': "+this.options.currentValue)}if(this.options.currentValue!==null&&this.options.currentValue.length>0){var m=this.options.currentValue.split(",");for(var k=0,l=m.length;k<l;k++){var j=m[k].split("|");this.options.transitions.push({id:j[0],label:j[1]})}}if(Alfresco.logger.isDebugEnabled()){Alfresco.logger.debug("Built transitions list: "+YAHOO.lang.dump(this.options.transitions))}},_generateTransitionButtons:function f(){for(var j=0,k=this.options.transitions.length;j<k;j++){this._generateTransitionButton(this.options.transitions[j])}},_generateTransitionButton:function b(k){var j=document.createElement("input");j.setAttribute("id",this.id+"-"+k.id);j.setAttribute("value",k.label);j.setAttribute("type","button");h.get(this.id+"-buttons").appendChild(j);var j=Alfresco.util.createYUIButton(this,k.id,this.onClick);YAHOO.Bubbling.fire("addSubmitElement",j)},_getHiddenField:function e(){var j=h.get(this.id+"-hidden");if(j===null){j=document.createElement("input");j.setAttribute("id",this.id+"-hidden");j.setAttribute("type","hidden");j.setAttribute("name","prop_transitions");h.get(this.id).appendChild(j)}return j}})})();