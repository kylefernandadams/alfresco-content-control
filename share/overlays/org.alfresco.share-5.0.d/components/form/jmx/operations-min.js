(function(){var f=YAHOO.util.Dom,h=YAHOO.util.Event;var c=Alfresco.util.encodeHTML;Alfresco.Operations=function(j){Alfresco.Operations.superclass.constructor.call(this,"Alfresco.Operations",j,["button","container"]);return this};YAHOO.extend(Alfresco.Operations,Alfresco.component.Base,{options:{currentValue:"",operations:null},onReady:function i(){this._processOperations();this._generateOperationButtons()},onClick:function a(m,n){var l=n.get("id");var k=l.substring(this.id.length+1);var j=this._getHiddenField();f.setAttribute(j,"value",k);if(Alfresco.logger.isDebugEnabled()){Alfresco.logger.debug("Set operations hidden field to: "+k)}Alfresco.util.submitForm(n.getForm())},_processOperations:function g(){this.options.operations=[];if(Alfresco.logger.isDebugEnabled()){Alfresco.logger.debug("Processing operations for field '"+this.id+"': "+this.options.currentValue)}if(this.options.currentValue!==null&&this.options.currentValue.length>0){var k=this.options.currentValue.split(",");for(var j=0,m=k.length;j<m;j++){var l=k[j].split("|");this.options.operations.push({id:l[0],label:l[1]})}}if(Alfresco.logger.isDebugEnabled()){Alfresco.logger.debug("Built operations list: "+YAHOO.lang.dump(this.options.operations))}},_generateOperationButtons:function d(){for(var j=0,k=this.options.operations.length;j<k;j++){this._generateOperationButton(this.options.operations[j])}},_generateOperationButton:function b(j){var k=document.createElement("input");k.setAttribute("id",this.id+"-"+j.id);k.setAttribute("value",j.label);k.setAttribute("type","button");f.get(this.id+"-buttons").appendChild(k);var k=Alfresco.util.createYUIButton(this,j.id,this.onClick);YAHOO.Bubbling.fire("addSubmitElement",k)},_getHiddenField:function e(){var j=f.get(this.id+"-hidden");if(j===null){j=document.createElement("input");j.setAttribute("id",this.id+"-hidden");j.setAttribute("type","hidden");j.setAttribute("name","prop_mbean_operations");f.get(this.id).appendChild(j)}return j}})})();