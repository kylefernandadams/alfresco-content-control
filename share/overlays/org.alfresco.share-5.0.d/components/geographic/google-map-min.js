(function(){var d=YAHOO.util.Dom;var b=Alfresco.util.encodeHTML;Alfresco.component.GoogleMap=function(e){return Alfresco.component.GoogleMap.superclass.constructor.call(this,"Alfresco.component.GoogleMap",e)};YAHOO.extend(Alfresco.component.GoogleMap,Alfresco.component.Base,{options:{documentDetails:null},recordData:null,onReady:function c(){var f=d.getXY("alf-ft")[1]-d.getXY(this.id+"-map")[1]-50;d.setStyle(this.id+"-map","height",f+"px");this.recordData=this.options.documentDetails.item;this.recordData.jsNode=new Alfresco.util.Node(this.recordData.node);var e=document.createElement("script");e.type="text/javascript";e.src=window.location.protocol+"//maps.google.com/maps/api/js?sensor=false&callback=Alfresco.component.GoogleMap.Callback";document.body.appendChild(e)},onGoogleAPIReady:function a(){var h=this.recordData.node.properties,j=new google.maps.LatLng(h["cm:latitude"],h["cm:longitude"]),f={zoom:16,center:j,mapTypeId:google.maps.MapTypeId.HYBRID};var i=new google.maps.Map(d.get(this.id+"-map"),f),e=new google.maps.Marker({position:j,map:i,title:this.recordData.displayName});var g=new google.maps.InfoWindow({content:d.get(this.id+"-info")});google.maps.event.addListener(e,"click",function(){g.open(i,e)});if(this.recordData.jsNode.hasAspect("exif:exif")){d.removeClass(this.id+"-exif","hidden");i.panBy(0,-200)}g.open(i,e)}})})();Alfresco.component.GoogleMap.Callback=function(){var a=Alfresco.util.ComponentManager.findFirst("Alfresco.component.GoogleMap");if(a){a.onGoogleAPIReady()}};